"use strict";var e=document.body.querySelectorAll(".utm"),t=function(e){var t,n,a=window.location.search.substring(1).split("&");for(n=0;n<a.length;n++)if((t=a[n].split("="))[0]===e)return void 0===t[1]||decodeURIComponent(t[1])}("utm_campaign");setTimeout(function(){t?e.forEach(function(e){return e.value=t}):e.forEach(function(e){return e.value="direct"})},600);var n=document.body.querySelectorAll(".question:not(.error):not(.promptQuestion)"),a=document.body.querySelectorAll(".prev"),r=document.body.querySelectorAll(".next"),o=document.body.querySelectorAll(".whithErrorChoise"),c=document.body.querySelector(".question.error"),i=document.body.querySelector(".sumValidation"),s=i.querySelector('input[name="sum"]'),l=i.querySelector(".isDisableButton"),d=s.getAttribute("data-min"),u=Number(s.getAttribute("data-max")),v=Number(s.getAttribute("data-error")),m=i.querySelector(".question_next"),f=document.body.querySelector(".promptQuestion"),L=document.body.querySelectorAll(".questionWithChangeHref"),y=0,E=function(e){e.preventDefault(),y++,c.classList.remove("active"),h()},b=function(){n.forEach(function(e){return e.classList.remove("active")}),c.classList.add("active")},g=function(e){e.preventDefault(),n.forEach(function(e){return e.classList.remove("active")}),f.classList.add("active")};r.forEach(function(e){e.addEventListener("click",E)}),a.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),y--,h()})});var h=function(){n.forEach(function(e){return e.classList.remove("active")}),n[y].classList.add("active")};o.forEach(function(n){n.addEventListener("change",function(e){var t=n.querySelector(".next");"true"===e.target.value?(t.addEventListener("click",E),t.removeEventListener("click",b)):(t.addEventListener("click",b),t.removeEventListener("click",E))})});var p=function(){var e=Number(s.value);localStorage.setItem("credits-house.ru_SUM",e),d<=e&&e<=u?(s.classList.add("valid"),l.classList.remove("disabled")):(s.classList.remove("valid"),l.classList.add("disabled")),v&&(v<=e?(m.removeEventListener("click",E),m.addEventListener("click",g)):(m.addEventListener("click",E),m.removeEventListener("click",g)))};s.addEventListener("input",p),window.addEventListener("load",function(){V.reset()}),window.addEventListener("load",function(){var e=localStorage.getItem("credits-house.ru_SUM");e&&(s.value=e,p())},{once:!0});var S=function(e){e.preventDefault(),f.classList.remove("active"),n[y].classList.add("active")};L.forEach(function(e){var n=e.querySelector(".question_next");e.addEventListener("change",function(e){e.preventDefault();var t=e.target.getAttribute("data-href");t?(n.removeEventListener("click",S),n.removeEventListener("click",E),n.setAttribute("href",t)):n.addEventListener("click",S)})});var q=document.body.querySelectorAll(".question_number"),k=document.body.querySelectorAll(".question_count");q.forEach(function(e,t){return e.textContent=t+1}),k.forEach(function(e){return e.textContent=n.length});var A=document.body.querySelectorAll(".isAllValidData"),C=function(e,t){Array.from(e).every(function(e){return e.classList.contains("valid")})?t.classList.remove("disabled"):t.classList.add("disabled")};A.forEach(function(e){var t=e.querySelectorAll(".isValidData"),n=e.querySelector(".isDisableButton");n&&(e.addEventListener("click",function(){return C(t,n)}),e.addEventListener("keyup",function(){return C(t,n)}),e.addEventListener("change",function(){return C(t,n)}))});var w=document.body.querySelectorAll(".isValidInput"),D=document.body.querySelector("#accepting");w.forEach(function(e){e.addEventListener("input",function(){e.checkValidity()?e.classList.add("valid"):e.classList.remove("valid")})}),D&&D.addEventListener("change",function(){D.checked?D.classList.add("valid"):D.classList.remove("valid")});var x=document.body.querySelectorAll(".telmask"),I=document.body.querySelectorAll(".birthdaymask"),_=document.body.querySelectorAll(".email");function U(r,o){return function(e){e=Object.assign(e,{path:"/","max-age":"2592000"});var t=encodeURIComponent(r)+"="+encodeURIComponent(o);for(var n in e){t+="; "+n;var a=e[n];!0!==a&&(t+="="+a)}document.cookie=t}(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{})}$(function(){$(".telmask").inputmask({clearIncomplete:!0,showMaskOnHover:!1,mask:"+7 (999) 999-99-99"}),$(".birthdaymask").inputmask({clearIncomplete:!0,showMaskOnHover:!1,mask:"99-99-9999"})}),x.forEach(function(e){e.addEventListener("keyup",function(){11===e.value.replace(/[^\d]/g,"").length?e.classList.add("valid"):e.classList.remove("valid")})}),I.forEach(function(i){var s=i.parentElement.querySelector(".valid-error");i.addEventListener("keyup",function(e){var t=i.value;if(8===t.replace(/[^\d]/g,"").length){var n=t.split("-"),a=new Date(n[2],n[1]-1,n[0]),r=new Date;if(r.setHours(0,0,0,0),a.getFullYear()!=n[2]||a.getMonth()+1!=n[1]||a.getDate()!=n[0])return i.classList.remove("valid"),void(s.textContent="* Пожалуйста, введите корректную дату рождения");var o=new Date;o.setFullYear(r.getFullYear()-18);var c=new Date;c.setFullYear(r.getFullYear()-75),o<a||a<=c?(i.classList.remove("valid"),s.textContent="* Кредитная программа доступна заемщикам в возрасте от 18 до 75 лет"):(i.classList.add("valid"),s.textContent="")}else i.classList.remove("valid"),s.textContent=""})}),_.forEach(function(t){t.addEventListener("keyup",function(e){/^\S+@\S+\.\S+$/.test(e.target.value)?t.classList.add("valid"):t.classList.remove("valid")})});var N=document.body.querySelector(".loader"),V=document.body.querySelector("form"),H=V.getAttribute("data-url"),M=document.body.querySelector(".disable-page");V.addEventListener("submit",function(){N.classList.add("active"),U(H,"send"),localStorage.removeItem("credits-house.ru_SUM")}),V.addEventListener("keydown",function(e){"Enter"===e.key&&e.preventDefault()}),window.addEventListener("load",function(e){var t,n;void 0!==(t=H,(n=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(n[1]):void 0)&&(e.preventDefault(),M.classList.add("active"))});var R=document.body.querySelector(".changeCompany"),F=document.body.querySelector('input[name="company"]');R&&R.addEventListener("change",function(e){"Екатеринбург"===e.target.value?F.value="CH - СКБ-банк":F.value="CH - Тинькофф Admitad"});var O=document.body.querySelector(".custom-select");if(O){var Y=O.querySelector(".custom-select_selected-option"),T=O.querySelectorAll(".custom-select_option"),B=function(e){"INPUT"!==e.target.tagName&&O.classList.remove("open")},P=function(e){if(e.preventDefault(),"INPUT"===e.target.tagName&&(O.classList.add("open"),document.body.addEventListener("click",B)),"LI"===e.target.tagName){var t=e.target.innerText;Y.value=t,O.classList.remove("open"),document.body.removeEventListener("click",B)}},Q=function(e){for(var t=Y.value,n=0;n<T.length;n++){if("".concat(T[n].textContent).toLowerCase()==="".concat(t).toLowerCase()){Y.classList.add("valid");break}Y.classList.remove("valid")}};O.addEventListener("click",function(e){P(e),Q()}),Y.addEventListener("input",function(e){var t,n;P(e),t=e.target.value,n=new RegExp(t,"i"),T.forEach(function(e){n.test(e.textContent)?e.classList.remove("hidden"):e.classList.add("hidden")}),Q()})}var j=document.body.querySelector(".changeCityList"),W=document.body.querySelector(".cityListIfApartment"),z=document.body.querySelector(".cityListIfOtherProperty"),G=document.body.querySelector(".isDisableButtonOnchangeCityQuestion");j.addEventListener("change",function(e){"Квартира"===e.target.getAttribute("data-value")?(W.classList.add("active"),z.classList.remove("active"),j.classList.add("isAllValidData"),G.classList.add("disabled")):(W.classList.remove("active"),z.classList.add("active"),j.classList.remove("isAllValidData"),G.classList.remove("disabled"))});