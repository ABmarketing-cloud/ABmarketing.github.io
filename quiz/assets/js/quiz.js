"use strict";var e=document.body.querySelectorAll(".utm"),t=function(e){var t,n,r=window.location.search.substring(1).split("&");for(n=0;n<r.length;n++)if((t=r[n].split("="))[0]===e)return void 0===t[1]||decodeURIComponent(t[1])}("utm_campaign");setTimeout(function(){t?e.forEach(function(e){return e.value=t}):e.forEach(function(e){return e.value="direct"})},600);var n=document.body.querySelectorAll(".question:not(.error):not(.promptQuestion)"),r=document.body.querySelectorAll(".prev"),a=document.body.querySelectorAll(".next"),o=document.body.querySelectorAll(".whithErrorChoise"),c=document.body.querySelector(".question.error"),i=document.body.querySelector(".sumValidation"),l=i.querySelector('input[name="sum"]'),s=l.getAttribute("data-min"),d=Number(l.getAttribute("data-max")),u=Number(l.getAttribute("data-error")),v=i.querySelector(".question_next"),m=document.body.querySelector(".promptQuestion"),f=document.body.querySelectorAll(".questionWithChangeHref"),L=0,y=function(e){e.preventDefault(),L++,c.classList.remove("active"),p()},E=function(){n.forEach(function(e){return e.classList.remove("active")}),c.classList.add("active")},h=function(e){e.preventDefault(),n.forEach(function(e){return e.classList.remove("active")}),m.classList.add("active")};a.forEach(function(e){e.addEventListener("click",y)}),r.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),L--,p()})});var p=function(){n.forEach(function(e){return e.classList.remove("active")}),n[L].classList.add("active")};o.forEach(function(n){n.addEventListener("change",function(e){var t=n.querySelector(".next");"true"===e.target.value?(t.addEventListener("click",y),t.removeEventListener("click",E)):(t.addEventListener("click",E),t.removeEventListener("click",y))})});var g=function(){var e=Number(l.value);localStorage.setItem("credits-house.ru_SUM",e),s<=e&&e<=d?l.classList.add("valid"):l.classList.remove("valid"),u&&(u<=e?(v.removeEventListener("click",y),v.addEventListener("click",h)):(v.addEventListener("click",y),v.removeEventListener("click",h)))};l.addEventListener("input",g),window.addEventListener("load",function(){N.reset()}),window.addEventListener("load",function(){var e=i.querySelector(".isDisableButton"),t=localStorage.getItem("credits-house.ru_SUM");t&&(l.value=t,g(),A(l,e))},{once:!0});var b=function(e){e.preventDefault(),m.classList.remove("active"),n[L].classList.add("active")};f.forEach(function(e){var n=e.querySelector(".question_next");e.addEventListener("change",function(e){e.preventDefault();var t=e.target.getAttribute("data-href");t?(n.removeEventListener("click",b),n.removeEventListener("click",y),n.setAttribute("href",t)):n.addEventListener("click",b)})});var S=document.body.querySelectorAll(".question_number"),q=document.body.querySelectorAll(".question_count");S.forEach(function(e,t){return e.textContent=t+1}),q.forEach(function(e){return e.textContent=n.length});var k=document.body.querySelectorAll(".isAllValidData"),A=function(e,t){Array.from(e).every(function(e){return e.classList.contains("valid")})?t.classList.remove("disabled"):t.classList.add("disabled")};k.forEach(function(e){var t=e.querySelectorAll(".isValidData"),n=e.querySelector(".isDisableButton");n&&(e.addEventListener("click",function(){return A(t,n)}),e.addEventListener("keyup",function(){return A(t,n)}),e.addEventListener("change",function(){return A(t,n)}))});var w=document.body.querySelectorAll(".isValidInput"),C=document.body.querySelector("#accepting");w.forEach(function(e){e.addEventListener("input",function(){e.checkValidity()?e.classList.add("valid"):e.classList.remove("valid")})}),C&&C.addEventListener("change",function(){C.checked?C.classList.add("valid"):C.classList.remove("valid")});var x=document.body.querySelectorAll(".telmask"),D=document.body.querySelectorAll(".birthdaymask"),I=document.body.querySelectorAll(".email");function _(a,o){return function(e){e=Object.assign(e,{path:"/","max-age":"2592000"});var t=encodeURIComponent(a)+"="+encodeURIComponent(o);for(var n in e){t+="; "+n;var r=e[n];!0!==r&&(t+="="+r)}document.cookie=t}(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{})}$(function(){$(".telmask").inputmask({clearIncomplete:!0,showMaskOnHover:!1,mask:"+7 (999) 999-99-99"}),$(".birthdaymask").inputmask({clearIncomplete:!0,showMaskOnHover:!1,mask:"99-99-9999"})}),x.forEach(function(e){e.addEventListener("keyup",function(){11===e.value.replace(/[^\d]/g,"").length?e.classList.add("valid"):e.classList.remove("valid")})}),D.forEach(function(i){var l=i.parentElement.querySelector(".valid-error");i.addEventListener("keyup",function(e){var t=i.value;if(8===t.replace(/[^\d]/g,"").length){var n=t.split("-"),r=new Date(n[2],n[1]-1,n[0]),a=new Date;if(a.setHours(0,0,0,0),r.getFullYear()!=n[2]||r.getMonth()+1!=n[1]||r.getDate()!=n[0])return i.classList.remove("valid"),void(l.textContent="* Пожалуйста, введите корректную дату рождения");var o=new Date;o.setFullYear(a.getFullYear()-18);var c=new Date;c.setFullYear(a.getFullYear()-75),o<r||r<=c?(i.classList.remove("valid"),l.textContent="* Кредитная программа доступна заемщикам в возрасте от 18 до 75 лет"):(i.classList.add("valid"),l.textContent="")}else i.classList.remove("valid"),l.textContent=""})}),I.forEach(function(t){t.addEventListener("keyup",function(e){/^\S+@\S+\.\S+$/.test(e.target.value)?t.classList.add("valid"):t.classList.remove("valid")})});var U=document.body.querySelector(".loader"),N=document.body.querySelector("form"),H=N.getAttribute("data-url"),M=document.body.querySelector(".disable-page");N.addEventListener("submit",function(){U.classList.add("active"),_(H,"send"),localStorage.removeItem("credits-house.ru_SUM")}),N.addEventListener("keydown",function(e){"Enter"===e.key&&e.preventDefault()}),window.addEventListener("load",function(e){var t,n;void 0!==(t=H,(n=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(n[1]):void 0)&&(e.preventDefault(),M.classList.add("active"))});var R=document.body.querySelector(".changeCompany"),F=document.body.querySelector('input[name="company"]');R&&R.addEventListener("change",function(e){"Екатеринбург"===e.target.value?F.value="CH - СКБ-банк":F.value="CH - Тинькофф Admitad"});var V=document.body.querySelector(".custom-select");if(V){var Y=V.querySelector(".custom-select_selected-option"),T=V.querySelectorAll(".custom-select_option"),O=function(e){"INPUT"!==e.target.tagName&&V.classList.remove("open")},B=function(e){if(e.preventDefault(),"INPUT"===e.target.tagName&&(V.classList.add("open"),document.body.addEventListener("click",O)),"LI"===e.target.tagName){var t=e.target.innerText;Y.value=t,V.classList.remove("open"),document.body.removeEventListener("click",O)}},P=function(e){for(var t=Y.value,n=0;n<T.length;n++){if("".concat(T[n].textContent).toLowerCase()==="".concat(t).toLowerCase()){Y.classList.add("valid");break}Y.classList.remove("valid")}};V.addEventListener("click",function(e){B(e),P()}),Y.addEventListener("input",function(e){var t,n;B(e),t=e.target.value,n=new RegExp(t,"i"),T.forEach(function(e){n.test(e.textContent)?e.classList.remove("hidden"):e.classList.add("hidden")}),P()})}