"use strict";var e=document.body.querySelectorAll(".utm"),t=function(e){var t,n,a=window.location.search.substring(1).split("&");for(n=0;n<a.length;n++)if((t=a[n].split("="))[0]===e)return void 0===t[1]||decodeURIComponent(t[1])}("utm_campaign");setTimeout(function(){t?e.forEach(function(e){return e.value=t}):e.forEach(function(e){return e.value="direct"})},600);var n=document.body.querySelectorAll(".question:not(.error):not(.promptQuestion)"),a=document.body.querySelectorAll(".prev"),r=document.body.querySelectorAll(".next"),o=document.body.querySelectorAll(".whithErrorChoise"),c=document.body.querySelector(".question.error"),i=document.body.querySelector(".sumValidation"),s=i.querySelector('input[name="sum"]'),d=i.querySelector(".isDisableButton"),l=s.getAttribute("data-min"),u=Number(s.getAttribute("data-max")),v=Number(s.getAttribute("data-error")),m=i.querySelector(".question_next"),f=document.body.querySelector(".promptQuestion"),y=document.body.querySelectorAll(".questionWithChangeHref"),L=0,b=function(e){e.preventDefault(),L++,c.classList.remove("active"),h()},E=function(e){e.preventDefault(),n.forEach(function(e){return e.classList.remove("active")}),c.classList.add("active")},g=function(e){e.preventDefault(),n.forEach(function(e){return e.classList.remove("active")}),f.classList.add("active")};r.forEach(function(e){e.addEventListener("click",b)}),a.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),L--,h()})});var h=function(){n.forEach(function(e){return e.classList.remove("active")}),n[L].classList.add("active")};o.forEach(function(n){n.addEventListener("change",function(e){var t=n.querySelector(".next");"true"===e.target.value?(t.addEventListener("click",b),t.removeEventListener("click",E)):(t.addEventListener("click",E),t.removeEventListener("click",b))})});var p=function(){var e=Number(s.value);localStorage.setItem("credits-house.ru_SUM",e),l<=e&&e<=u?(s.classList.add("valid"),d.classList.remove("disabled")):(s.classList.remove("valid"),d.classList.add("disabled")),v&&(v<=e?(m.removeEventListener("click",b),m.addEventListener("click",g)):(m.addEventListener("click",b),m.removeEventListener("click",g)))};s.addEventListener("input",p),window.addEventListener("load",function(){H.reset()}),window.addEventListener("load",function(){var e=localStorage.getItem("credits-house.ru_SUM");e&&(s.value=e,p())},{once:!0});var S=function(e){e.preventDefault(),f.classList.remove("active"),n[L].classList.add("active")};y.forEach(function(e){var n=e.querySelector(".question_next");e.addEventListener("change",function(e){e.preventDefault();var t=e.target.getAttribute("data-href");t?(n.removeEventListener("click",S),n.removeEventListener("click",b),n.setAttribute("href",t)):n.addEventListener("click",S)})});var q=document.body.querySelectorAll(".question_number"),k=document.body.querySelectorAll(".question_count");q.forEach(function(e,t){return e.textContent=t+1}),k.forEach(function(e){return e.textContent=n.length});var A=document.body.querySelectorAll(".isAllValidData"),w=function(e,t){Array.from(e).every(function(e){return e.classList.contains("valid")})?t.classList.remove("disabled"):t.classList.add("disabled")};A.forEach(function(e){var t=e.querySelectorAll(".isValidData"),n=e.querySelector(".isDisableButton");n&&(e.addEventListener("click",function(){return w(t,n)}),e.addEventListener("keyup",function(){return w(t,n)}),e.addEventListener("change",function(){return w(t,n)}))});var C=document.body.querySelectorAll(".isValidInput"),D=document.body.querySelector("#accepting");C.forEach(function(e){e.addEventListener("input",function(){e.checkValidity()?e.classList.add("valid"):e.classList.remove("valid")})}),D&&D.addEventListener("change",function(){D.checked?D.classList.add("valid"):D.classList.remove("valid")});var x=document.body.querySelectorAll(".telmask"),I=document.body.querySelectorAll(".birthdaymask"),_=document.body.querySelectorAll(".email");function U(r,o){return function(e){e=Object.assign(e,{path:"/","max-age":"2592000"});var t=encodeURIComponent(r)+"="+encodeURIComponent(o);for(var n in e){t+="; "+n;var a=e[n];!0!==a&&(t+="="+a)}document.cookie=t}(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{})}$(function(){$(".telmask").inputmask({clearIncomplete:!0,showMaskOnHover:!1,mask:"+7 (999) 999-99-99"}),$(".birthdaymask").inputmask({clearIncomplete:!0,showMaskOnHover:!1,mask:"99-99-9999"})}),x.forEach(function(e){e.addEventListener("keyup",function(){11===e.value.replace(/[^\d]/g,"").length?e.classList.add("valid"):e.classList.remove("valid")})}),I.forEach(function(i){var s=i.parentElement.querySelector(".valid-error");i.addEventListener("keyup",function(e){var t=i.value;if(8===t.replace(/[^\d]/g,"").length){var n=t.split("-"),a=new Date(n[2],n[1]-1,n[0]),r=new Date;if(r.setHours(0,0,0,0),a.getFullYear()!=n[2]||a.getMonth()+1!=n[1]||a.getDate()!=n[0])return i.classList.remove("valid"),void(s.textContent="* Пожалуйста, введите корректную дату рождения");var o=new Date;o.setFullYear(r.getFullYear()-18);var c=new Date;c.setFullYear(r.getFullYear()-75),o<a||a<=c?(i.classList.remove("valid"),s.textContent="* Кредитная программа доступна заемщикам в возрасте от 18 до 75 лет"):(i.classList.add("valid"),s.textContent="")}else i.classList.remove("valid"),s.textContent=""})}),_.forEach(function(t){t.addEventListener("keyup",function(e){/^\S+@\S+\.\S+$/.test(e.target.value)?t.classList.add("valid"):t.classList.remove("valid")})});var N=document.body.querySelector(".loader"),H=document.body.querySelector("form"),M=H.getAttribute("data-url"),R=document.body.querySelector(".disable-page");H.addEventListener("submit",function(){N.classList.add("active"),U(M,"send"),localStorage.removeItem("credits-house.ru_SUM")}),H.addEventListener("keydown",function(e){"Enter"===e.key&&e.preventDefault()}),window.addEventListener("load",function(e){var t,n;void 0!==(t=M,(n=document.cookie.match(new RegExp("(?:^|; )"+t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(n[1]):void 0)&&(e.preventDefault(),R.classList.add("active"))});var F=document.body.querySelector(".changeCompany"),V=document.body.querySelector('input[name="company"]');F&&F.addEventListener("change",function(e){"Екатеринбург"===e.target.value?V.value="CH - СКБ-банк":V.value="CH - Тинькофф Admitad"});var Y=document.body.querySelector(".custom-select"),B=document.body.querySelector(".customSelect");if(Y){var O=Y.querySelector(".custom-select_selected-option"),T=Y.querySelectorAll(".custom-select_option"),P=B.querySelector(".isDisableButton"),Q=function(e){"INPUT"!==e.target.tagName&&Y.classList.remove("open")},j=function(e){if(e.preventDefault(),"INPUT"===e.target.tagName&&(Y.classList.add("open"),document.body.addEventListener("click",Q)),"LI"===e.target.tagName){var t=e.target.innerText;O.value=t,Y.classList.remove("open"),document.body.removeEventListener("click",Q)}},W=function(e){for(var t=O.value,n=0;n<T.length;n++){if("".concat(T[n].textContent).toLowerCase()==="".concat(t).toLowerCase()){O.classList.add("valid"),P.classList.remove("disabled");break}O.classList.remove("valid"),P.classList.add("disabled")}};Y.addEventListener("click",function(e){j(e),W()}),O.addEventListener("input",function(e){var t,n;j(e),t=e.target.value,n=new RegExp(t,"i"),T.forEach(function(e){n.test(e.textContent)?e.classList.remove("hidden"):e.classList.add("hidden")}),W()})}var z=document.body.querySelector(".changeCityList");if(z){var G=document.body.querySelector(".cityListIfApartment"),J=document.body.querySelector(".cityListIfOtherProperty"),K=document.body.querySelector(".cityQuestion").querySelector(".isDisableButton");z.addEventListener("change",function(e){"Квартира"===e.target.getAttribute("data-value")?(G.classList.add("active"),J.classList.remove("active"),K.classList.add("disabled")):(G.classList.remove("active"),J.classList.add("active"),K.classList.remove("disabled"))})}